<div class='container'> <!-- Container YOUR ORDER RECAP / UPPER VIEW PART -->
  <div class ='row text-center'><h3 class='module-title'>YOUR ORDER LIST FROM <%= @shop.name %> </h3></div>

  <div class ='row text-center'>
    <% @total = 0 %>
    <% @item_data.each do |k, v| %>

      <div class='col-sm-3 position_relative'>

        <div class='col-sm-12 position_relative'>
          <%= image_tag 'test_cart_vincent.png' %>
          <span class='col-sm-9 bottom_left'><%= Item.find(k.to_i).name %></span>
          <span class='col-sm-3 bottom_right'><%= Item.find(k.to_i).price.round(2).to_s + '€' %></span>
        </div>

        <div class='col-sm-12 position_relative'>
          <span class='col-sm-6'><%= 'Qty : ' + v.to_s %></span>
          <span class='col-sm-6'><%= 'Total : ' + (Item.find(k.to_i).price * v).round(2).to_s + '€' %></span>
        </div>

      </div>

      <% @total += (Item.find(k.to_i).price * v) %>
    <% end %>
  </div>

    <div class ='row'> <!-- Add ons -->
      <br>
      <div class='col-md-6 text-center'>
        <button class='btn btn-custom-1'>
          <%= link_to 'Back to Coffee shop', shop_path(@shop.id) %>
        </button>
      </div> <!-- path a updaté -->
      <div class='col-md-6 text-center'>
        <%= 'Total amount : ' + @total.round(2).to_s + '€' %>
      </div>
    </div>
</div>

<div class='container'> <!-- Container DELIVERY METHOD CHOICE / LOWER VIEW PART -->
  <br>
  <div class ='row text-center'><h3 class='module-title'>SELECT YOUR DELIVERY METHOD</h3></div>



  <div class ='row'>
    <!-- TODO # IF CLICK  SET orders.delivery_type = false (take away) -->
    <div class= 'col-md-6 position_relative iconbox' id='take_away' style='background: none'>
      <%= image_tag 'barista_test_cart.jpg' %>
     <span class='delivery_bottom'>Meet the barista</span>
    </div>

    <!-- TODO # ELSE SET orders.delivery_type = true (delivery) -->
    <div class= 'col-md-6 position_relative iconbox' id='delivery' style='background: none'>
      <%= image_tag 'delivery_guy_test.jpg' %>
      <span class='delivery_bottom'>Meet the delivery guy</span>
    </div>
  </div>

  <div id='pending_orders' style='display: none'>
      <br>
    <div class='text-center'>
      <h3 class='module-title'>CHOOSE AN ORDER TO DELIVER</h3>
    </div>

    <div> <!-- PRENDRE EN COMPTE LE STATUT PENDING !!!!! -->

      <% @total_orders = 0 %>
      <% @orders.each do |order| %>
        <% if order.order_items.first.item.shop_id == @shop.id && order.status == true %>
        <% @total_orders += 1 %>
          <div><!-- bloc list -->
            <div>ORDER INFO
              <h4>Order n°<%= order.id %></h4>
            </div>
            <div>
              <h4>Items list :</h4>
              <% order.order_items.each do |order_item| %>
                <p><%= order_item.item.name + ' - ' + order_item.item.price.to_s + '€' %></p> <!-- Set order_item list -->
              <% end %>
            </div>
            <div>
              MAP<!-- bloc map direction -->
            </div>
            <div>
              SELECT DELIVERY ORDER <!-- need css -->
            </div>
          </div>
        <% end %>
      <% end %>


      <% if @total_orders == 0 %>
        <div>
          SORRY, NOTHING TO DELIVER FOR NOW,
        </div>
      <% end %>
    </div>
  </div>



  <!-- TODO # Method de validation / bouton à créer -->
  <div class ='row text-center'>
  <br>
    <button type='button' class='btn btn-custom-3 btn-lg'><%= link_to 'ORDER_VALIDATION_BUTTON', 'order_validate_path' %></button>
  </div>
  <br>
</div>


<% content_for :after_js do %>
  <%= javascript_include_tag 'cart.js' %>
<%end%>


